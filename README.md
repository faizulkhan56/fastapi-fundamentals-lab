# FastAPI Fundamentals Lab -- Complete End‚Äëto‚ÄëEnd Guide

## üìå Introduction

This lab provides a **complete FastAPI learning project**, including: -
Deep theoretical explanation of FastAPI internals\
- Full CRUD API implementation\
- Path & Query Parameters\
- Pydantic model validation\
- Architecture diagrams\
- End‚Äëto‚Äëend request flow\
- Deployment (Local, Docker, Docker Compose)\
- Testing via Swagger & Postman\
- ML‚Äëreadiness discussion\
- References & best practices

This README is designed so **anyone can learn FastAPI from zero to
deployment**.

------------------------------------------------------------------------

# üß† 1. What is FastAPI?

FastAPI is a modern, high‚Äëperformance web framework for building APIs in
Python.\
Key features include:

-   **Automatic validation** via Python type hints\
-   **Automatic documentation** (OpenAPI + Swagger UI)\
-   **Pydantic models** for request/response schemas\
-   **Async support** (built on Starlette and Uvicorn)\
-   Extremely fast --- comparable to Node.js & Go

FastAPI is widely used for: - Machine Learning model deployment\
- Backend microservices\
- Real‚Äëtime applications\
- Internal APIs & integrations

------------------------------------------------------------------------

# üèóÔ∏è 2. Architecture Overview

    Client ‚Üí Load Balancer (optional) ‚Üí FastAPI (Uvicorn) ‚Üí CRUD Logic ‚Üí Database (In‚Äëmemory for this lab)

### üîç Detailed Flow

1.  **Client** sends HTTP request\
2.  **FastAPI router** matches endpoint\
3.  **Pydantic validation** checks input\
4.  **CRUD functions** handle business logic\
5.  Response goes back via **Uvicorn ASGI server**\
6.  FastAPI automatically converts everything to JSON

------------------------------------------------------------------------

# üìÅ 3. Project Structure

    fastapi-fundamentals-lab/
    ‚îú‚îÄ‚îÄ app/
    ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
    ‚îÇ   ‚îú‚îÄ‚îÄ main.py
    ‚îÇ   ‚îú‚îÄ‚îÄ routes.py
    ‚îÇ   ‚îú‚îÄ‚îÄ models.py
    ‚îÇ   ‚îú‚îÄ‚îÄ crud.py
    ‚îÇ   ‚îî‚îÄ‚îÄ database.py
    ‚îú‚îÄ‚îÄ requirements.txt
    ‚îú‚îÄ‚îÄ docker-compose.yml
    ‚îú‚îÄ‚îÄ Dockerfile
    ‚îú‚îÄ‚îÄ README.md
    ‚îî‚îÄ‚îÄ medium.md

This structure is **ML‚Äëready** and matches industry standards.

------------------------------------------------------------------------

# üß© 4. Deep Code Explanation

## 4.1 main.py

Creates FastAPI app and includes routers.

    app = FastAPI()
    app.include_router(api_router)

## 4.2 models.py

Defines Pydantic `Item` model.

    class Item(BaseModel):
        id: int
        name: str
        description: Optional[str] = None

Pydantic automatically: - Validates JSON input - Serializes responses -
Generates OpenAPI schemas

## 4.3 database.py

Simple in‚Äëmemory list simulates a database.

## 4.4 CRUD Logic (crud.py)

Encapsulates business logic:

-   get_items()
-   get_item()
-   create_item()
-   update_item()
-   delete_item()

## 4.5 routes.py

Contains all API endpoints: - GET `/items/` - GET `/items/{id}` - POST
`/items/` - PUT `/items/{id}` - DELETE `/items/{id}` - Query param
examples (`filter/`, `search/`)

------------------------------------------------------------------------

# üåê 5. End-to-End Request Example

### User runs:

    PUT /items/2

### Request body:

``` json
{
  "id": 2,
  "name": "Updated",
  "description": "Updated description"
}
```

### Flow:

    Browser/Postman
       ‚Üì
    FastAPI Router (/items/{item_id})
       ‚Üì
    Pydantic validates JSON ‚Üí Item object
       ‚Üì
    CRUD.update_item()
       ‚Üì
    Items list updated
       ‚Üì
    FastAPI returns response_model Item

------------------------------------------------------------------------

# üß™ 6. Testing the API

This section provides detailed instructions for testing all API endpoints using both **Swagger UI** (auto-generated documentation) and **Postman**.

## 6.1 Testing with Swagger UI

Swagger UI is automatically generated by FastAPI and provides an interactive interface to test all endpoints.

### Accessing Swagger UI

1. Start your FastAPI server:
   ```bash
   uvicorn app.main:app --reload
   ```

2. Open your browser and navigate to:
   ```
   http://localhost:8000/docs
   ```

3. You'll see an interactive API documentation page with all available endpoints.

### Testing Endpoints in Swagger UI

#### 1. Root Endpoint - GET `/`
- **Location**: Expand the `GET /` endpoint
- **Click**: "Try it out" button
- **Execute**: Click "Execute" button
- **Expected Response**: 
  ```json
  {
    "message": "Welcome to the FastAPI Fundamentals Lab API"
  }
  ```

#### 2. Get All Items - GET `/items/`
- **Location**: Expand the `GET /items/` endpoint
- **Click**: "Try it out" button
- **Execute**: Click "Execute" button
- **Expected Response**: Array of items
  ```json
  [
    {
      "id": 1,
      "name": "Item One",
      "description": "First item"
    }
  ]
  ```

#### 3. Get Item by ID - GET `/items/{item_id}`
- **Location**: Expand the `GET /items/{item_id}` endpoint
- **Click**: "Try it out" button
- **Parameters**: 
  - `item_id` (path parameter): Enter an integer (e.g., `1`)
- **Execute**: Click "Execute" button
- **Expected Response**: 
  ```json
  {
    "id": 1,
    "name": "Item One",
    "description": "First item"
  }
  ```
- **Error Case**: If item not found, returns `404` with message "Item not found"

#### 4. Create Item - POST `/items/`
- **Location**: Expand the `POST /items/` endpoint
- **Click**: "Try it out" button
- **Request Body**: Click "Example Value" or enter manually:
  ```json
  {
    "id": 4,
    "name": "Item Four",
    "description": "Great item"
  }
  ```
- **Execute**: Click "Execute" button
- **Expected Response**: `201 Created` with the created item
  ```json
  {
    "id": 4,
    "name": "Item Four",
    "description": "Great item"
  }
  ```

#### 5. Update Item - PUT `/items/{item_id}`
- **Location**: Expand the `PUT /items/{item_id}` endpoint
- **Click**: "Try it out" button
- **Parameters**: 
  - `item_id` (path parameter): Enter an integer (e.g., `1`)
- **Request Body**: 
  ```json
  {
    "id": 1,
    "name": "Updated Item",
    "description": "Updated description"
  }
  ```
- **Execute**: Click "Execute" button
- **Expected Response**: Updated item
  ```json
  {
    "id": 1,
    "name": "Updated Item",
    "description": "Updated description"
  }
  ```
- **Error Case**: If item not found, returns `404` with message "Item not found"

#### 6. Delete Item - DELETE `/items/{item_id}`
- **Location**: Expand the `DELETE /items/{item_id}` endpoint
- **Click**: "Try it out" button
- **Parameters**: 
  - `item_id` (path parameter): Enter an integer (e.g., `1`)
- **Execute**: Click "Execute" button
- **Expected Response**: 
  ```json
  {
    "detail": "Item deleted"
  }
  ```
- **Error Case**: If item not found, returns `404` with message "Item not found"

#### 7. Filter Items - GET `/filter/`
- **Location**: Expand the `GET /filter/` endpoint
- **Click**: "Try it out" button
- **Query Parameters**: 
  - `category` (required): Enter a string (e.g., `"electronics"`)
  - `price_lt` (required): Enter a float (e.g., `99.99`)
- **Execute**: Click "Execute" button
- **Expected Response**: 
  ```json
  {
    "category": "electronics",
    "price_less_than": 99.99
  }
  ```

#### 8. Search Items - GET `/search/`
- **Location**: Expand the `GET /search/` endpoint
- **Click**: "Try it out" button
- **Query Parameters**: 
  - `q` (optional): Enter a search query string (e.g., `"laptop"`)
  - `skip` (optional, default: `0`): Number of items to skip
  - `limit` (optional, default: `10`): Maximum number of items to return
- **Execute**: Click "Execute" button
- **Expected Response**: 
  ```json
  {
    "items": [
      {"item_id": "123"},
      {"item_id": "456"}
    ],
    "q": "laptop"
  }
  ```

### Swagger UI Features

- **Automatic Schema Validation**: Swagger validates your input before sending requests
- **Try It Out**: Interactive testing without leaving the browser
- **Response Examples**: See example request/response schemas
- **Error Handling**: View error responses and status codes
- **OpenAPI Schema**: Access raw OpenAPI JSON at `http://localhost:8000/openapi.json`

---

## 6.2 Testing with Postman

Postman is a powerful API testing tool that allows you to create, save, and organize API requests.

### Setting Up Postman

1. **Install Postman**: Download from [postman.com](https://www.postman.com/downloads/)
2. **Create a New Collection**: 
   - Click "New" ‚Üí "Collection"
   - Name it "FastAPI Fundamentals Lab"
3. **Set Base URL**: 
   - Create an environment variable `base_url` = `http://localhost:8000`
   - Or use `http://localhost:8000` directly in each request

### Testing All Endpoints in Postman

#### 1. Root Endpoint - GET `/`

**Request Setup:**
- **Method**: `GET`
- **URL**: `http://localhost:8000/`
- **Headers**: None required

**Send Request:**
- Click "Send" button

**Expected Response:**
- **Status**: `200 OK`
- **Body**:
  ```json
  {
    "message": "Welcome to the FastAPI Fundamentals Lab API"
  }
  ```

---

#### 2. Get All Items - GET `/items/`

**Request Setup:**
- **Method**: `GET`
- **URL**: `http://localhost:8000/items/`
- **Headers**: None required

**Send Request:**
- Click "Send" button

**Expected Response:**
- **Status**: `200 OK`
- **Body**: Array of items
  ```json
  [
    {
      "id": 1,
      "name": "Item One",
      "description": "First item"
    },
    {
      "id": 2,
      "name": "Item Two",
      "description": "Second item"
    }
  ]
  ```

---

#### 3. Get Item by ID - GET `/items/{item_id}`

**Request Setup:**
- **Method**: `GET`
- **URL**: `http://localhost:8000/items/1`
  - Replace `1` with the desired item ID
- **Headers**: None required

**Send Request:**
- Click "Send" button

**Expected Response (Success):**
- **Status**: `200 OK`
- **Body**:
  ```json
  {
    "id": 1,
    "name": "Item One",
    "description": "First item"
  }
  ```

**Expected Response (Error):**
- **Status**: `404 Not Found`
- **Body**:
  ```json
  {
    "detail": "Item not found"
  }
  ```

---

#### 4. Create Item - POST `/items/`

**Request Setup:**
- **Method**: `POST`
- **URL**: `http://localhost:8000/items/`
- **Headers**: 
  - `Content-Type: application/json`
- **Body**: 
  - Select "Body" tab
  - Choose "raw" and "JSON" format
  - Enter JSON:
    ```json
    {
      "id": 4,
      "name": "Item Four",
      "description": "Great item"
    }
    ```

**Send Request:**
- Click "Send" button

**Expected Response:**
- **Status**: `201 Created`
- **Body**:
  ```json
  {
    "id": 4,
    "name": "Item Four",
    "description": "Great item"
  }
  ```

**Test Cases:**
- Try creating an item with missing required fields (should return validation error)
- Try creating an item with invalid data types (should return validation error)

---

#### 5. Update Item - PUT `/items/{item_id}`

**Request Setup:**
- **Method**: `PUT`
- **URL**: `http://localhost:8000/items/1`
  - Replace `1` with the item ID to update
- **Headers**: 
  - `Content-Type: application/json`
- **Body**: 
  - Select "Body" tab
  - Choose "raw" and "JSON" format
  - Enter JSON:
    ```json
    {
      "id": 1,
      "name": "Updated Item",
      "description": "Updated description"
    }
    ```

**Send Request:**
- Click "Send" button

**Expected Response (Success):**
- **Status**: `200 OK`
- **Body**:
  ```json
  {
    "id": 1,
    "name": "Updated Item",
    "description": "Updated description"
  }
  ```

**Expected Response (Error):**
- **Status**: `404 Not Found`
- **Body**:
  ```json
  {
    "detail": "Item not found"
  }
  ```

---

#### 6. Delete Item - DELETE `/items/{item_id}`

**Request Setup:**
- **Method**: `DELETE`
- **URL**: `http://localhost:8000/items/1`
  - Replace `1` with the item ID to delete
- **Headers**: None required

**Send Request:**
- Click "Send" button

**Expected Response (Success):**
- **Status**: `200 OK`
- **Body**:
  ```json
  {
    "detail": "Item deleted"
  }
  ```

**Expected Response (Error):**
- **Status**: `404 Not Found`
- **Body**:
  ```json
  {
    "detail": "Item not found"
  }
  ```

---

#### 7. Filter Items - GET `/filter/`

**Request Setup:**
- **Method**: `GET`
- **URL**: `http://localhost:8000/filter/`
- **Query Parameters**: 
  - Click "Params" tab
  - Add parameter:
    - Key: `category`, Value: `electronics`
    - Key: `price_lt`, Value: `99.99`
  - Final URL will be: `http://localhost:8000/filter/?category=electronics&price_lt=99.99`
- **Headers**: None required

**Send Request:**
- Click "Send" button

**Expected Response:**
- **Status**: `200 OK`
- **Body**:
  ```json
  {
    "category": "electronics",
    "price_less_than": 99.99
  }
  ```

**Test Cases:**
- Try without required parameters (should return validation error)
- Try with invalid data types (should return validation error)

---

#### 8. Search Items - GET `/search/`

**Request Setup:**
- **Method**: `GET`
- **URL**: `http://localhost:8000/search/`
- **Query Parameters**: 
  - Click "Params" tab
  - Add parameters (all optional):
    - Key: `q`, Value: `laptop`
    - Key: `skip`, Value: `0`
    - Key: `limit`, Value: `10`
  - Final URL will be: `http://localhost:8000/search/?q=laptop&skip=0&limit=10`
- **Headers**: None required

**Send Request:**
- Click "Send" button

**Expected Response:**
- **Status**: `200 OK`
- **Body**:
  ```json
  {
    "items": [
      {"item_id": "123"},
      {"item_id": "456"}
    ],
    "q": "laptop"
  }
  ```

**Test Cases:**
- Try without any parameters (should work with defaults)
- Try with only `q` parameter
- Try with different `skip` and `limit` values

---

### Postman Best Practices

1. **Create a Collection**: Organize all requests in a collection for easy access
2. **Use Environment Variables**: 
   - Create an environment with `base_url = http://localhost:8000`
   - Use `{{base_url}}/items/` in requests
3. **Save Requests**: Save each request with descriptive names
4. **Add Tests**: Use Postman's test scripts to validate responses automatically
5. **Export Collection**: Export your collection to share with team members

### Postman Test Scripts Example

You can add test scripts in Postman to automatically validate responses:

```javascript
// Example test for GET /items/
pm.test("Status code is 200", function () {
    pm.response.to.have.status(200);
});

pm.test("Response is an array", function () {
    var jsonData = pm.response.json();
    pm.expect(jsonData).to.be.an('array');
});
```

---

## 6.3 Quick Testing Checklist

Use this checklist to ensure all endpoints are working correctly:

- [ ] GET `/` - Returns welcome message
- [ ] GET `/items/` - Returns list of items
- [ ] GET `/items/{id}` - Returns specific item (test with valid and invalid IDs)
- [ ] POST `/items/` - Creates new item (test with valid and invalid data)
- [ ] PUT `/items/{id}` - Updates item (test with valid and invalid IDs)
- [ ] DELETE `/items/{id}` - Deletes item (test with valid and invalid IDs)
- [ ] GET `/filter/` - Filters items with query parameters
- [ ] GET `/search/` - Searches items with optional query parameters

---

## 6.4 Common Issues and Solutions

### Issue: Connection Refused
**Solution**: Ensure FastAPI server is running on `http://localhost:8000`

### Issue: 422 Validation Error
**Solution**: Check that request body matches the expected schema (id, name, description)

### Issue: 404 Not Found
**Solution**: Verify the item ID exists before updating/deleting

### Issue: CORS Errors (if testing from browser)
**Solution**: Add CORS middleware to `main.py` if needed for cross-origin requests

------------------------------------------------------------------------

# üê≥ 7. Docker Deployment

## Build Image

    docker build -t fastapi-lab .

## Run Container

    docker run -p 8000:8000 fastapi-lab

## Docker Compose

    docker compose up --build

------------------------------------------------------------------------

# üöÄ 8. Cloud Deployment (VM + Load Balancer)

1.  Provision VM
2.  Install Python / Docker
3.  Deploy app
4.  Expose via load balancer
5.  Verify using:

```{=html}
<!-- -->
```
    https://<LB-DNS>/items/

------------------------------------------------------------------------

# ü§ñ 9. ML API-Ready Architecture

To add a prediction endpoint: 1. Train ML model\
2. Load model in FastAPI\
3. Add `/predict` route\
4. Use Pydantic schema for features

Example:

``` python
@app.post("/predict/")
def predict(input: Features):
    return model.predict(...)
```

------------------------------------------------------------------------

# üìö 10. References

Official Docs: - https://fastapi.tiangolo.com/\
- https://pydantic-docs.helpmanual.io/\
- https://uvicorn.org/

------------------------------------------------------------------------

# üèÅ Conclusion

This FastAPI lab is a **complete foundation** for: - Learning API
development\
- Deploying backend services\
- Deploying ML models\
- Understanding API architecture

You can now extend this into production‚Äëgrade systems.
